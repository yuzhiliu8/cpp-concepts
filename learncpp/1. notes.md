# C++ Notes

### Build Configuration

**g++:**

**Common flags:**
- -std=c++20       $\rightarrow$ specify which C++ standard language version to use
- -g                  $\rightarrow$  generate debug symbols for debug tools like gdb
- -O0                 $\rightarrow$  disable any compiler optimizations (predictable stepping thru program)
- -Wall               $\rightarrow$  catch (warn about) common mistakes (ex. unused, uninitialized variables)
- -Wextra             $\rightarrow$  warns about unused parameters, signed/unsigned comparisons, useless casts, comparisons always true/false
- -Wpedantic          $\rightarrow$  warns about non ISO compliant code (using C++ compiler extensions)
- -fsanitize=address  $\rightarrow$  warns about memory errors (seg faults, )
- -fsanitize=undefined $\rightarrow$  catch UB (undefined behavior) (overflow, bad casts)
- -fno-omit-frame-pointer $\rightarrow$  better stack traces
- -o  $\rightarrow$  path or name of the output executable file

### Initialization

Variable definition/allocation, and assignment:
```cpp
int x; //define integer x, this line allocates memory
x = 5; //assign x to a value, this is copy-assignment for primtiive types
```
Variable Initialization: (provide initial value when defining)
```cpp
int x;  //default initialization - usually bad. For some types like int, it assigns a "garbage value"
int b = 5;  //copy initialization, can easily get confused with copy assignment. Usually less efficient initialization for more complex types
int c(5);   //direct intialization, usually used for calling explicit constructors for more complex types
//preferred:
int x{5}; //direct-list-initialization
int x{};    //value initialization, sets default value that is consistent and not a garbage value
```

### I/O
Standard input/output library is ```<iostream>```
```cpp
#include <iostream>
int main(){
    std::cout << "Hello, World!" << std::endl; 
    std::cout << "My Name is Bob" << std::endl;
    int x{};
    std::cin >> x; // >> extraction operator, send data to x
    return 0;
}
```
- the output sent to cout is collected in a buffer. This buffer is "flushed" periodically, and all currently buffered output is sent to the console. Writing output to the buffer is fast, but flushing the buffer is slow
- Think of the buffer as a queue of output data held in memory
- input characters are also sent to an input buffer in `cin`. `\n` is also stored in the buffer and marks the end of an input line. By default, `cin` will block/wait if there is nothing in the buffer. Is there is already data in the buffer, then `cin` will not block
- `>>` removes from the beginning of the input buffer and converts the input into a value that is copy-assigned to the variable. It reads as many consecutive characters as it can, until it reaches any newline or character that cannot be read into the type of the variable(this could be any whitespace, or a letter when trying to read in an int)
- if cin encounters a character that is invalid for the type (exluding whitespace), then an error flag turns on and all cin extraction >> fails unless cin error flags are cleared

```std::endl``` vs ```\n```:
- doing << \n just writes a newline character to the buffer
- endl writes a newline character, and then immediately flushes the buffer (slow)
- if you are writing many lines, use 'std::endl' if needed, but in most cases just '\n' is fine

#### Literals
- Literals are values that are inserted directly into the source code. These values usually appear directly in the executable code (unless they are optimized out).
- Objects and variables represent memory locations that hold values. These values can be fetched on demand.
```cpp
int x{6};
std::cout << x << "\n"; //prints the integer value that is stored at the memory location of x, which is 6
std::cout << 5 << "\n"; //directly print out 5, since 5 is in the source code
```
#### Operators
- Operators used primarily for return: arithmetic
- Operators used primarily for side effect: =, <<, >>
- For primarily side effect operators, it returns the left operand to allow for chaining
```cpp
((std::cout << x) << 5) << "\n";
x = (y = 5) // eq to y = 5; x = y;
```

### Expressions
- Sequence of literals, variables, operators, function calls, etc.
- Can return a value, object, or nothing (void functions)





